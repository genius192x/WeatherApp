(()=>{"use strict";let e={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.Windows()}};let t=!0,n=(e=500)=>{let n=document.querySelector("body");if(t){let i=document.querySelectorAll("[data-lp]");setTimeout((()=>{for(let e=0;e<i.length;e++){i[e].style.paddingRight="0px"}n.style.paddingRight="0px",document.documentElement.classList.remove("lock")}),e),t=!1,setTimeout((function(){t=!0}),e)}},i=(e=500)=>{let n=document.querySelector("body");if(t){let i=document.querySelectorAll("[data-lp]");for(let e=0;e<i.length;e++){i[e].style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px"}n.style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px",document.documentElement.classList.add("lock"),t=!1,setTimeout((function(){t=!0}),e)}};let r=!1;function o(e){this.type=e}setTimeout((()=>{if(r){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0),o.prototype.init=function(){const e=this;this.оbjects=[],this.daClassname="_dynamic_adapt_",this.nodes=document.querySelectorAll("[data-da]");for(let e=0;e<this.nodes.length;e++){const t=this.nodes[e],n=t.dataset.da.trim().split(","),i={};i.element=t,i.parent=t.parentNode,i.destination=document.querySelector(n[0].trim()),i.breakpoint=n[1]?n[1].trim():"767",i.place=n[2]?n[2].trim():"last",i.index=this.indexInParent(i.parent,i.element),this.оbjects.push(i)}this.arraySort(this.оbjects),this.mediaQueries=Array.prototype.map.call(this.оbjects,(function(e){return"("+this.type+"-width: "+e.breakpoint+"px),"+e.breakpoint}),this),this.mediaQueries=Array.prototype.filter.call(this.mediaQueries,(function(e,t,n){return Array.prototype.indexOf.call(n,e)===t}));for(let t=0;t<this.mediaQueries.length;t++){const n=this.mediaQueries[t],i=String.prototype.split.call(n,","),r=window.matchMedia(i[0]),o=i[1],a=Array.prototype.filter.call(this.оbjects,(function(e){return e.breakpoint===o}));r.addListener((function(){e.mediaHandler(r,a)})),this.mediaHandler(r,a)}},o.prototype.mediaHandler=function(e,t){if(e.matches)for(let e=0;e<t.length;e++){const n=t[e];n.index=this.indexInParent(n.parent,n.element),this.moveTo(n.place,n.element,n.destination)}else for(let e=t.length-1;e>=0;e--){const n=t[e];n.element.classList.contains(this.daClassname)&&this.moveBack(n.parent,n.element,n.index)}},o.prototype.moveTo=function(e,t,n){t.classList.add(this.daClassname),"last"===e||e>=n.children.length?n.insertAdjacentElement("beforeend",t):"first"!==e?n.children[e].insertAdjacentElement("beforebegin",t):n.insertAdjacentElement("afterbegin",t)},o.prototype.moveBack=function(e,t,n){t.classList.remove(this.daClassname),void 0!==e.children[n]?e.children[n].insertAdjacentElement("beforebegin",t):e.insertAdjacentElement("beforeend",t)},o.prototype.indexInParent=function(e,t){const n=Array.prototype.slice.call(e.children);return Array.prototype.indexOf.call(n,t)},o.prototype.arraySort=function(e){"min"===this.type?Array.prototype.sort.call(e,(function(e,t){return e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?-1:"last"===e.place||"first"===t.place?1:e.place-t.place:e.breakpoint-t.breakpoint})):Array.prototype.sort.call(e,(function(e,t){return e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?1:"last"===e.place||"first"===t.place?-1:t.place-e.place:t.breakpoint-e.breakpoint}))};new o("max").init();const a=document.getElementById("root"),s=document.getElementById("popup"),c=document.getElementById("text-input"),l=document.getElementById("form");let d={city:"Taganrog",temperature:0,observationTime:"00:00 AM",isDay:"yes",description:"",properties:{cloudcover:{},humidity:{},windSpeed:{},pressure:{},uvIndex:{},visibility:{}}};const u=async()=>{try{const e=localStorage.getItem("query")||d.city,t=await fetch(`http://api.weatherstack.com/current?access_key=75c5a84211d803cd2b29de9cde7415f8&query=${e}`),n=await t.json(),{current:{cloudcover:i,temperature:r,humidity:o,observation_time:a,pressure:s,uv_index:c,visibility:l,is_day:u,weather_descriptions:p,wind_speed:m},location:{name:y}}=n;d={...d,isDay:u,city:y,temperature:r,observationTime:a,description:p[0],properties:{cloudcover:{title:"cloudcover",value:`${i}%`,icon:"cloud.png"},humidity:{title:"humidity",value:`${o}%`,icon:"humidity.png"},windSpeed:{title:"wind speed",value:`${m} km/h`,icon:"wind.png"},pressure:{title:"pressure",value:`${s} %`,icon:"gauge.png"},uvIndex:{title:"uv Index",value:`${c} / 100`,icon:"uv-index.png"},visibility:{title:"visibility",value:`${l}%`,icon:"visibility.png"}}},v()}catch(e){console.log(e)}},p=document.getElementById("app"),m=()=>{const{city:e,description:t,observationTime:n,temperature:i,isDay:r,properties:o}=d,a="yes"===r?"is-day":"";return console.log(a),"is-day"==a?p.classList.add("is-day"):p.classList.remove("is-day"),`<div class="container">\n            <div class="top">\n\t\t\t\t\t <div type="button" class="menu__icon icon-menu"><span></span></div>\n\t\t\t\t\t\t\n              <div class="city">\n                <div class="city-subtitle">Weather Today in</div>\n                  <div class="city-title" id="city">\n                  <span>${e}</span>\n                </div>\n              </div>\n              <div class="city-info">\n                <div class="top-left">\n                <img class="icon" src="./img/${(e=>{switch(e.toLowerCase()){case"overcast":return"partly.png";case"cloud":case"cloud":return"cloud.png";case"fog":return"fog.png";case"sunny":return"sunny.png";case"clear":return"clear.png";case"light rain":return"light-rain.svg";default:return"the.png"}})(t)}" alt="" />\n                <div class="description">${t}</div>\n              </div>\n            \n              <div class="top-right">\n                <div class="city-info__subtitle">as of ${n}</div>\n                <div class="city-info__title">${i}°</div>\n              </div>\n            </div>\n          </div>\n        <div id="properties">${(e=>Object.values(e).map((({title:e,value:t,icon:n})=>`<div class="property">\n            <div class="property-icon">\n              <img class="property-icons" src="./img/${n}" alt="">\n            </div>\n            <div class="property-info">\n              <div class="property-info__value">${t}</div>\n              <div class="property-info__description">${e}</div>\n            </div>\n          </div>`)).join(""))(o)}</div>\n      </div>`},y=()=>{s.classList.toggle("active")};document.querySelector(".popup-close").addEventListener("click",y);const v=()=>{a.innerHTML=m();document.querySelector(".menu__icon").addEventListener("click",y)};l.addEventListener("submit",(e=>{e.preventDefault();const t=d.city;if(p.classList.remove("is-day"),!t)return null;localStorage.setItem("query",t),u(),y()})),c.addEventListener("input",(e=>{d={...d,city:e.target.value}})),u(),window.FLS=!1,e.any()&&document.documentElement.classList.add("touch"),window.addEventListener("load",(function(){setTimeout((function(){document.documentElement.classList.add("loaded")}),0)})),document.querySelector(".icon-menu")&&document.addEventListener("click",(function(e){t&&e.target.closest(".icon-menu")&&(((e=500)=>{document.documentElement.classList.contains("lock")?n(e):i(e)})(),document.documentElement.classList.toggle("menu-open"))})),function(){if(document.querySelectorAll("[data-fullscreen]").length&&e.any()){function t(){let e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`)}window.addEventListener("resize",t),t()}}()})();